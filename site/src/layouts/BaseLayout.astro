---
const { title = 'TRIAD — physics‑driven consensus', description = 'TRIAD — высокопроизводительная, энергоэффективная распределённая сеть с физически‑вдохновлённым консенсусом.' } = Astro.props;
import '../styles/global.css';
import logoUrl from '../assets/Untitled design-2.svg?url';
const baseRaw = import.meta.env.BASE_URL || '/';
const base = baseRaw.endsWith('/') ? baseRaw : baseRaw + '/';
const withBase = (path: string) => base + path.replace(/^\/+/, '');
const logoHref = logoUrl;
const isHome = Astro.url.pathname === base;
---
<html lang="ru" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <meta name="theme-color" content="#0e1116" />
    <link rel="icon" href={logoHref} type="image/svg+xml" />
    <title>{title}</title>
  </head>
  <body class="h-full bg-ink text-white antialiased">
    <div class="min-h-screen flex flex-col">
      <header class="border-b border-white/10">
        <div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between">
          <a href={withBase('')} class="flex items-center gap-2 text-white font-semibold">
            { !isHome && <img src={logoHref} alt="TRIAD" class="h-9 md:h-12 w-auto animate-glow" /> }
            <span class={isHome ? '' : 'text-lg md:text-xl'}>TRIAD</span>
          </a>
          <nav class="hidden md:flex items-center gap-6 text-sm text-mist">
            <a href={withBase('')} class="hover:text-white">Главная</a>
            <a href={withBase('about')} class="hover:text-white">О проекте</a>
            <a href={withBase('ideas')} class="hover:text-white">Идеи</a>
            <a href={withBase('start')} class="hover:text-white">Старт</a>
            <a href={withBase('structure')} class="hover:text-white">Структура</a>
            <a href={withBase('roadmap')} class="hover:text-white">Роадмап</a>
            <a href={withBase('contacts')} class="hover:text-white">Контакты</a>
            <a href={withBase('github')} class="text-white">GitHub</a>
          </nav>
          <details class="md:hidden text-sm text-mist">
            <summary class="cursor-pointer select-none px-3 py-2 rounded border border-white/20">Меню</summary>
            <div class="mt-3 flex flex-col gap-2 bg-ink/80 backdrop-blur rounded border border-white/10 p-3">
              <a href={withBase('')} class="hover:text-white">Главная</a>
              <a href={withBase('about')} class="hover:text-white">О проекте</a>
              <a href={withBase('ideas')} class="hover:text-white">Идеи</a>
              <a href={withBase('start')} class="hover:text-white">Старт</a>
              <a href={withBase('structure')} class="hover:text-white">Структура</a>
              <a href={withBase('roadmap')} class="hover:text-white">Роадмап</a>
              <a href={withBase('contacts')} class="hover:text-white">Контакты</a>
              <a href={withBase('github')} class="hover:text-white">GitHub</a>
            </div>
          </details>
        </div>
      </header>

      <main class="flex-1">
        <slot />
      </main>

      <footer class="border-t border-white/10">
        <div class="mx-auto max-w-6xl px-4 py-6 text-sm text-mist flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <span>© {new Date().getFullYear()} TRIAD · MIT</span>
          <nav class="flex flex-wrap items-center gap-4">
            <a href={withBase('')} class="hover:text-white">Главная</a>
            <a href={withBase('about')} class="hover:text-white">О проекте</a>
            <a href={withBase('ideas')} class="hover:text-white">Идеи</a>
            <a href={withBase('start')} class="hover:text-white">Старт</a>
            <a href={withBase('structure')} class="hover:text-white">Структура</a>
            <a href={withBase('roadmap')} class="hover:text-white">Роадмап</a>
            <a href={withBase('contacts')} class="hover:text-white">Контакты</a>
            <a href={withBase('github')} class="hover:text-white">GitHub</a>
          </nav>
        </div>
      </footer>
    </div>
  </body>
</html>
