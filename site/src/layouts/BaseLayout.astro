---
const { title = 'TRIAD — physics‑driven consensus', description = 'TRIAD is a high‑performance, energy‑efficient distributed network with a physics‑inspired consensus.' } = Astro.props;
import '../styles/global.css';
import logoUrl from '../assets/Untitled design-2.svg?url';
import DarkVeil from '@components/DarkVeil';
const baseRaw = import.meta.env.BASE_URL || '/';
const base = baseRaw.endsWith('/') ? baseRaw : baseRaw + '/';
const withBase = (path: string) => base + path.replace(/^\/+/, '');
const logoHref = logoUrl;
const isHome = Astro.url.pathname === base;
---
<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <meta name="theme-color" content="#0e1116" />
    <link rel="icon" href={logoHref} type="image/svg+xml" />
    <link rel="preload" as="image" href={logoHref} type="image/svg+xml" />
    <link rel="preconnect" href="https://github.com" crossorigin="anonymous" />
    <link rel="preconnect" href="https://x.com" crossorigin="anonymous" />
    <link rel="dns-prefetch" href="https://github.com" />
    <link rel="dns-prefetch" href="https://x.com" />
    <!-- Prefetch core internal routes for faster first navigation -->
    <link rel="prefetch" href={withBase('about')} as="document" />
    <link rel="prefetch" href={withBase('innovations')} as="document" />
    <link rel="prefetch" href={withBase('start')} as="document" />
    <link rel="prefetch" href={withBase('structure')} as="document" />
    <link rel="prefetch" href={withBase('roadmap')} as="document" />
    <link rel="prefetch" href={withBase('contacts')} as="document" />
    <link rel="prefetch" href={withBase('documentation')} as="document" />
    <link rel="prefetch" href={withBase('whitepaper')} as="document" />
    <link rel="prefetch" href={withBase('pitchdeck')} as="document" />
    <title>{title}</title>
  </head>
  <body class="h-full bg-ink text-white antialiased">
    <!-- Global animated background layer -->
    <div class="fixed inset-0 z-0 pointer-events-none bg-white/5">
      <DarkVeil client:idle speed={0.8} noiseIntensity={0.08} scanlineIntensity={0.18} scanlineFrequency={8.0} warpAmount={0.2} />
    </div>
    <div class="relative z-10 min-h-screen flex flex-col">
      <header class="border-b border-white/10">
        <div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between">
          <a href={withBase('')} class="flex items-center gap-2 text-white font-semibold">
            { !isHome && <img src={logoHref} alt="TRIAD" loading="lazy" decoding="async" class="h-9 md:h-12 w-auto animate-glow" /> }
            <span class={isHome ? '' : 'text-lg md:text-xl'}>TRIAD</span>
          </a>
          <nav class="hidden md:flex items-center gap-6 text-sm text-mist">
            <a href={withBase('')} class="hover:text-white">Home</a>
            <a href={withBase('about')} class="hover:text-white">About</a>
            <a href={withBase('innovations')} class="hover:text-white">Innovations</a>
            <a href={withBase('start')} class="hover:text-white">Start</a>
            <a href={withBase('structure')} class="hover:text-white">Structure</a>
            <a href={withBase('roadmap')} class="hover:text-white">Roadmap</a>
            <a href={withBase('documentation')} class="hover:text-white">Documentation</a>
            <a href={withBase('contacts')} class="hover:text-white">Contact</a>
            <a href="https://github.com/fillay12321/TRIAD" target="_blank" rel="noopener" aria-label="GitHub" class="ml-2 inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/20 bg-white/5 text-white hover:bg-white/10 hover:border-white/40 transition">
              <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" class="opacity-90"><path fill="currentColor" d="M12 .5a11.5 11.5 0 0 0-3.64 22.41c.58.11.79-.25.79-.55v-2c-3.2.7-3.87-1.37-3.87-1.37-.53-1.35-1.3-1.71-1.3-1.71-1.06-.72.08-.7.08-.7 1.18.08 1.81 1.22 1.81 1.22 1.04 1.8 2.72 1.28 3.39.98.11-.76.41-1.28.74-1.57-2.55-.29-5.23-1.28-5.23-5.7 0-1.26.45-2.3 1.2-3.12-.12-.3-.52-1.52.11-3.17 0 0 .98-.31 3.2 1.19a11.06 11.06 0 0 1 5.82 0c2.22-1.5 3.2-1.19 3.2-1.19.63 1.65.23 2.87.11 3.17.75.82 1.2 1.86 1.2 3.12 0 4.43-2.69 5.41-5.26 5.7.42.36.79 1.07.79 2.17v3.22c0 .3.21.66.8.55A11.5 11.5 0 0 0 12 .5Z"/></svg>
            </a>
          </nav>
          <details class="md:hidden text-sm text-mist">
            <summary class="cursor-pointer select-none px-3 py-2 rounded border border-white/20">Menu</summary>
            <div class="mt-3 flex flex-col gap-2 bg-ink/80 backdrop-blur rounded border border-white/10 p-3">
              <a href={withBase('')} class="hover:text-white">Home</a>
              <a href={withBase('about')} class="hover:text-white">About</a>
              <a href={withBase('innovations')} class="hover:text-white">Innovations</a>
              <a href={withBase('start')} class="hover:text-white">Start</a>
              <a href={withBase('structure')} class="hover:text-white">Structure</a>
              <a href={withBase('roadmap')} class="hover:text-white">Roadmap</a>
              <a href={withBase('documentation')} class="hover:text-white">Documentation</a>
              <a href={withBase('contacts')} class="hover:text-white">Contact</a>
              <a href="https://github.com/fillay12321/TRIAD" target="_blank" rel="noopener" class="hover:text-white">GitHub ↗</a>
            </div>
          </details>
        </div>
      </header>

      <main class="flex-1">
        <slot />
      </main>

      <footer class="border-t border-white/10">
        <div class="mx-auto max-w-6xl px-4 py-6 text-sm text-mist flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <span>© {new Date().getFullYear()} TRIAD · MIT</span>
          <nav class="flex flex-wrap items-center gap-4">
            <a href={withBase('')} class="hover:text-white">Home</a>
            <a href={withBase('about')} class="hover:text-white">About</a>
            <a href={withBase('innovations')} class="hover:text-white">Innovations</a>
            <a href={withBase('start')} class="hover:text-white">Start</a>
            <a href={withBase('structure')} class="hover:text-white">Structure</a>
            <a href={withBase('roadmap')} class="hover:text-white">Roadmap</a>
            <a href={withBase('documentation')} class="hover:text-white">Documentation</a>
            <a href={withBase('contacts')} class="hover:text-white">Contact</a>
            <a href="https://github.com/fillay12321/TRIAD" target="_blank" rel="noopener" class="hover:text-white">GitHub</a>
          </nav>
        </div>
      </footer>
    </div>
  </body>
</html>
