---
import BaseLayout from '@layouts/BaseLayout.astro';
---
<BaseLayout title="Roadmap — TRIAD">
  <section class="relative">
    <!-- Soft gradient backdrop -->
    <div class="pointer-events-none absolute inset-0 opacity-30 [mask-image:radial-gradient(70%_60%_at_50%_30%,black,transparent)]">
      <div class="absolute -inset-24 bg-[radial-gradient(circle_at_top_right,rgba(124,156,255,0.25),transparent_60%)]"></div>
      <div class="absolute -inset-24 bg-[radial-gradient(circle_at_bottom_left,rgba(0,255,200,0.15),transparent_60%)]"></div>
    </div>

    <div class="relative mx-auto max-w-6xl px-4 py-12">
      <header class="mb-8">
        <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Roadmap</h1>
        <p class="mt-3 text-mist max-w-3xl">TRIAD is being built as a computational L1 where consensus emerges from physics. Below are the detailed phases: from research prototypes to beta network launch and token economics.</p>
        <div class="mt-4 flex flex-wrap gap-2 text-xs">
          <span class="inline-flex items-center rounded-full bg-emerald-400/10 text-emerald-200 border border-emerald-300/20 px-3 py-1">Core R&D · ongoing</span>
          <span class="inline-flex items-center rounded-full bg-sky-400/10 text-sky-200 border border-sky-300/20 px-3 py-1">Network · in progress</span>
          <span class="inline-flex items-center rounded-full bg-amber-400/10 text-amber-200 border border-amber-300/20 px-3 py-1">DevEx · planned</span>
          <span class="inline-flex items-center rounded-full bg-rose-400/10 text-rose-200 border border-rose-300/20 px-3 py-1">Alpha/Beta · planned</span>
        </div>
        <div class="mt-6 grid gap-3 sm:grid-cols-2 lg:grid-cols-4">
          <div class="rounded-lg border border-white/10 bg-white/5 p-4">
            <div class="text-xs text-white/70">Current sprint</div>
            <div class="mt-1 text-white font-medium">Core optimization</div>
            <div class="mt-1 text-xs text-mist">ETA: 2–3 weeks</div>
          </div>
          <div class="rounded-lg border border-white/10 bg-white/5 p-4">
            <div class="text-xs text-white/70">Network (MVP)</div>
            <div class="mt-1 text-white font-medium">p2p + WS, metrics</div>
            <div class="mt-1 text-xs text-mist">ETA: 5–7 days (UI integration)</div>
          </div>
          <div class="rounded-lg border border-white/10 bg-white/5 p-4">
            <div class="text-xs text-white/70">Testing</div>
            <div class="mt-1 text-white font-medium">Benchmarks and profiles</div>
            <div class="mt-1 text-xs text-mist">ETA: 1–2 weeks</div>
          </div>
          <div class="rounded-lg border border-white/10 bg-white/5 p-4">
            <div class="text-xs text-white/70">Documentation</div>
            <div class="mt-1 text-white font-medium">SDK/CLI draft</div>
            <div class="mt-1 text-xs text-mist">ETA: after network</div>
          </div>
        </div>
      </header>

      <!-- Анимация удалена по запросу -->

      <!-- Timeline -->
      <ol class="relative border-s border-white/10 pl-6 space-y-8">
        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 0</span>
              <span class="inline-flex items-center rounded-full bg-emerald-400/10 text-emerald-300 border border-emerald-300/20 px-2 py-0.5">ongoing</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Research and prototyping</h2>
            <p class="mt-2 text-mist">Wave-based consensus model, wave abstractions (amplitude, phase, TTL), baseline DAG, initial aggregation and interference heuristics. Goal: validate hypotheses and obtain tangible metrics.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li><span class="text-white/80">Batch Ed25519 verification</span> — ed25519‑zebra [progress: 70%]</li>
              <li><span class="text-white/80">Parallel batches</span> — Rayon, lock‑free queues [60%]</li>
              <li><span class="text-white/80">Profiling</span> — identify hot paths [50%]</li>
              <li><span class="text-white/80">Minimal p2p transport</span> — wave exchange [MVP]</li>
            </ul>
            <p class="mt-3 text-xs text-white/60">Phase ETA: 2–4 weeks. Dependencies: stable core APIs, basic metrics.</p>
          </div>
        </li>

        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 1</span>
              <span class="inline-flex items-center rounded-full bg-sky-400/10 text-sky-300 border border-sky-300/20 px-2 py-0.5">core</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Core and compute optimization</h2>
            <p class="mt-2 text-mist">Drive efficiency: SIMD/AVX, allocations, data layout, improved thread pools. Establish a stable execution API for higher layers.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li><span class="text-white/80">SIMD/AVX</span> optimizations of critical paths</li>
              <li><span class="text-white/80">Sharding</span> and wave routing</li>
              <li><span class="text-white/80">Batch channels</span> and backpressure</li>
              <li><span class="text-white/80">Metrics</span>: latency, throughput, tail</li>
            </ul>
            <p class="mt-3 text-xs text-white/60">Phase ETA: 3–5 weeks. Risk: performance regressions under aggressive optimizations.</p>
          </div>
        </li>

        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 2</span>
              <span class="inline-flex items-center rounded-full bg-purple-400/10 text-purple-300 border border-purple-300/20 px-2 py-0.5">network</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Network, resilience, and failures</h2>
            <p class="mt-2 text-mist">P2P distribution of waves, propagation and dedup heuristics, resilience to network faults and adversarial nodes. Improve diagnostics and self-healing.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li><span class="text-white/80">Adaptive TTLs</span> and window filters</li>
              <li><span class="text-white/80">Erasure codes</span> for aggregates (research)</li>
              <li><span class="text-white/80">Auto-isolation</span> of noisy/malicious peers</li>
              <li><span class="text-white/80">Observability</span>: tracing, profiles, alerts</li>
            </ul>
            <p class="mt-3 text-xs text-white/60">Phase ETA: 4–6 weeks. Dependencies: stable transport, base relay policies.</p>
          </div>
        </li>

        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 3</span>
              <span class="inline-flex items-center rounded-full bg-amber-400/10 text-amber-300 border border-amber-300/20 px-2 py-0.5">DevEx</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Tooling and developer experience</h2>
            <p class="mt-2 text-mist">SDK, simulators, local nets, solid documentation. Straightforward integration and clear examples: from smart contracts to off‑chain workers.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li><span class="text-white/80">CLI/SDK</span>, project templates</li>
              <li><span class="text-white/80">Benchmarks</span> and load replicators</li>
              <li><span class="text-white/80">Tutorials</span> and recipes</li>
              <li><span class="text-white/80">Integrations</span> with popular wallets</li>
            </ul>
            <p class="mt-3 text-xs text-white/60">Phase ETA: 3–4 weeks after network stabilization.</p>
          </div>
        </li>

        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 4</span>
              <span class="inline-flex items-center rounded-full bg-rose-400/10 text-rose-300 border border-rose-300/20 px-2 py-0.5">alpha/beta</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Public tests and network</h2>
            <p class="mt-2 text-mist">Public testnets, phased launches, performance and stability SLOs, preparation for mainnet release.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li><span class="text-white/80">Public benchmarks</span> and reports</li>
              <li><span class="text-white/80">Risk-free</span> network upgrades</li>
              <li><span class="text-white/80">Bug bounty</span> program</li>
              <li><span class="text-white/80">Regular releases</span> and changelog</li>
            </ul>
            <p class="mt-3 text-xs text-white/60">Phase ETA: determined by Phase 2–3 outcomes.</p>
          </div>
        </li>
      </ol>

      <!-- Risks & Dependencies -->
      <div class="mt-12 rounded-2xl border border-white/10 bg-white/5/40 backdrop-blur p-6">
        <div class="flex items-center justify-between gap-3 flex-wrap">
          <h2 class="text-xl font-semibold text-white">Risks and dependencies</h2>
          <span class="inline-flex items-center rounded-full bg-white/10 text-white/80 border border-white/20 px-3 py-1 text-xs">Updating</span>
        </div>
        <div class="mt-4 grid md:grid-cols-3 gap-4 text-sm">
          <div class="rounded-lg border border-white/10 p-4 bg-black/20">
            <h3 class="font-semibold text-white">Technical</h3>
            <ul class="mt-2 list-disc pl-5 text-mist">
              <li>Performance regressions under optimizations</li>
              <li>Debugging complexity of parallel paths</li>
              <li>Network flakes and unstable peer graphs</li>
            </ul>
          </div>
          <div class="rounded-lg border border-white/10 p-4 bg-black/20">
            <h3 class="font-semibold text-white">Organizational</h3>
            <ul class="mt-2 list-disc pl-5 text-mist">
              <li>Priority shifts between phases</li>
              <li>Limited time for documentation</li>
            </ul>
          </div>
          <div class="rounded-lg border border-white/10 p-4 bg-black/20">
            <h3 class="font-semibold text-white">Dependencies</h3>
            <ul class="mt-2 list-disc pl-5 text-mist">
              <li>Stabilization of networking stack and UI</li>
              <li>Library choices for cryptography and p2p</li>
              <li>Hardware accelerators (optional)</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Tokenomics -->
      <div class="mt-12 rounded-2xl border border-white/10 bg-white/5/40 backdrop-blur p-6">
        <div class="flex items-center justify-between gap-3 flex-wrap">
          <h2 class="text-xl font-semibold text-white">Tokenomics</h2>
          <span class="inline-flex items-center rounded-full bg-indigo-400/10 text-indigo-200 border border-indigo-300/20 px-3 py-1 text-xs">Coming soon</span>
        </div>
        <p class="mt-3 text-mist">We are designing TRIAD tokenomics with incentives for validators, users, and developers. A draft spec and distribution diagrams will be published soon.</p>
        <div class="mt-4 grid md:grid-cols-3 gap-4 text-sm">
          <div class="rounded-lg border border-white/10 p-4 bg-black/20">
            <h3 class="font-semibold text-white">Principles</h3>
            <p class="mt-1 text-mist">Transparency, long-term network sustainability, fair rewards for compute and storage, anti‑Sybil mechanics.</p>
          </div>
          <div class="rounded-lg border border-white/10 p-4 bg-black/20">
            <h3 class="font-semibold text-white">Components</h3>
            <p class="mt-1 text-mist">Emission, staking, fees for compute/throughput batches, subsidies for early participants and developers.</p>
          </div>
          <div class="rounded-lg border border-white/10 p-4 bg-black/20">
            <h3 class="font-semibold text-white">Timeline</h3>
            <p class="mt-1 text-mist">Draft — soon. Open discussion — after publication. Iterative refinement based on public tests.</p>
          </div>
        </div>
      </div>

      <script is:inline>
        const steps = Array.from(document.querySelectorAll('.roadmap-step'));
        if (steps.length) {
          const io = new IntersectionObserver((entries)=>{
            entries.forEach((e)=>{
              if (e.isIntersecting) {
                e.target.classList.remove('opacity-0','translate-y-4');
                e.target.classList.add('opacity-100','translate-y-0');
                io.unobserve(e.target);
              }
            })
          }, { threshold: 0.15, rootMargin: '0px 0px -10% 0px' });
          steps.forEach((s, i)=>{
            s.style.transitionDelay = `${Math.min(i*80, 320)}ms`;
            io.observe(s);
          })
        }
      </script>
    </div>
  </section>
</BaseLayout>
