---
import BaseLayout from '@layouts/BaseLayout.astro';
---
<BaseLayout title="Роадмап — TRIAD">
  <section class="relative">
    <!-- Soft gradient backdrop -->
    <div class="pointer-events-none absolute inset-0 opacity-30 [mask-image:radial-gradient(70%_60%_at_50%_30%,black,transparent)]">
      <div class="absolute -inset-24 bg-[radial-gradient(circle_at_top_right,rgba(124,156,255,0.25),transparent_60%)]"></div>
      <div class="absolute -inset-24 bg-[radial-gradient(circle_at_bottom_left,rgba(0,255,200,0.15),transparent_60%)]"></div>
    </div>

    <div class="relative mx-auto max-w-6xl px-4 py-12">
      <header class="mb-8">
        <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Дорожная карта</h1>
        <p class="mt-3 text-mist max-w-3xl">TRIAD строится как вычислительная L1, где консенсус — проявление физики. Ниже — подробные этапы: от исследовательских прототипов до бета‑запуска сети и экономической модели.</p>
      </header>

      <!-- Timeline -->
      <ol class="relative border-s border-white/10 pl-6 space-y-8">
        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 0</span>
              <span class="inline-flex items-center rounded-full bg-emerald-400/10 text-emerald-300 border border-emerald-300/20 px-2 py-0.5">идёт</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Исследование и прототипирование</h2>
            <p class="mt-2 text-mist">Волновая модель консенсуса, абстракции волны (амплитуда, фаза, TTL), базовый DAG, первичные эвристики агрегации и интерференции. Цель — подтвердить корректность гипотез и получить осязаемые метрики.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li>Батч‑верификация Ed25519 (ed25519‑zebra)</li>
              <li>Параллельные батчи (Rayon, lock‑free очереди)</li>
              <li>Трассировка и профилировка горячих путей</li>
              <li>Минимальный p2p‑транспорт для обмена волнами</li>
            </ul>
          </div>
        </li>

        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 1</span>
              <span class="inline-flex items-center rounded-full bg-sky-400/10 text-sky-300 border border-sky-300/20 px-2 py-0.5">ядро</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Оптимизация ядра и вычислений</h2>
            <p class="mt-2 text-mist">Доводим эффективность: SIMD/AVX, аллокации, layout структур, улучшенные пулы потоков. Формируем стабильный API исполнения для верхнего уровня.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li>SIMD/AVX оптимизации критичных участков</li>
              <li>Модель шардирования и маршрутизации волн</li>
              <li>Пакетные каналы и backpressure</li>
              <li>Протокол метрик: latency, throughput, tail</li>
            </ul>
          </div>
        </li>

        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 2</span>
              <span class="inline-flex items-center rounded-full bg-purple-400/10 text-purple-300 border border-purple-300/20 px-2 py-0.5">сеть</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Сеть, устойчивость и ошибки</h2>
            <p class="mt-2 text-mist">Дистрибуция волн в p2p, эвристики распространения и дедупликации, устойчивость к сетевым сбоям и вредоносным узлам. Улучшаем диагностику и автозаживление.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li>Адаптивные TTL и оконные фильтры</li>
              <li>Erasure/коды для агрегатов (по исследованию)</li>
              <li>Автоизолирование шумных пиров</li>
              <li>Наблюдаемость: трассинг, профайлы, алерты</li>
            </ul>
          </div>
        </li>

        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 3</span>
              <span class="inline-flex items-center rounded-full bg-amber-400/10 text-amber-300 border border-amber-300/20 px-2 py-0.5">DevEx</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Инструменты и опыт разработчика</h2>
            <p class="mt-2 text-mist">SDK, симуляторы, локальные сети, хорошая документация. Простая интеграция и понятные примеры: от смарт‑контрактов до off‑chain воркеров.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li>CLI/SDK, шаблоны проектов</li>
              <li>Наборы бенчмарков и репликаторы нагрузки</li>
              <li>Учебные примеры и рецепты</li>
              <li>Интеграции с популярными кошельками</li>
            </ul>
          </div>
        </li>

        <li class="roadmap-step opacity-0 translate-y-4 transition-all duration-300">
          <div class="absolute -start-3 top-1.5 h-6 w-6 rounded-full bg-white/15 ring-2 ring-white/30"></div>
          <div class="rounded-xl border border-white/10 bg-white/5/40 backdrop-blur p-5">
            <div class="flex items-center gap-2 text-xs text-white/70">
              <span class="inline-flex items-center rounded-full border border-white/20 px-2 py-0.5">Phase 4</span>
              <span class="inline-flex items-center rounded-full bg-rose-400/10 text-rose-300 border border-rose-300/20 px-2 py-0.5">alpha/beta</span>
            </div>
            <h2 class="mt-2 text-lg font-semibold text-white">Публичные тесты и сеть</h2>
            <p class="mt-2 text-mist">Публичные тестовые сети, фазовые запуски, SLO по производительности и стабильности, подготовка к мейннет‑релизу.</p>
            <ul class="mt-3 grid sm:grid-cols-2 gap-2 text-mist list-disc pl-5">
              <li>Публичные бенчмарки и отчёты</li>
              <li>Безрискованные апгрейды сети</li>
              <li>Программа багбаунти</li>
              <li>Регулярные релизы и changelog</li>
            </ul>
          </div>
        </li>
      </ol>

      <!-- Tokenomics -->
      <div class="mt-12 rounded-2xl border border-white/10 bg-white/5/40 backdrop-blur p-6">
        <div class="flex items-center justify-between gap-3 flex-wrap">
          <h2 class="text-xl font-semibold text-white">Токеномика</h2>
          <span class="inline-flex items-center rounded-full bg-indigo-400/10 text-indigo-200 border border-indigo-300/20 px-3 py-1 text-xs">Скоро</span>
        </div>
        <p class="mt-3 text-mist">Мы разрабатываем модель токеномики TRIAD, учитывая стимулы валидаторов, пользователей и разработчиков. Публикация базовой спецификации и диаграмм распределения ожидается в ближайшее время.</p>
        <div class="mt-4 grid md:grid-cols-3 gap-4 text-sm">
          <div class="rounded-lg border border-white/10 p-4 bg-black/20">
            <h3 class="font-semibold text-white">Принципы</h3>
            <p class="mt-1 text-mist">Прозрачность, долговременная устойчивость сети, справедливое вознаграждение вычислений и хранения, антисибил‑механики.</p>
          </div>
          <div class="rounded-lg border border-white/10 p-4 bg-black/20">
            <h3 class="font-semibold text-white">Компоненты</h3>
            <p class="mt-1 text-mist">Эмиссия, стейкинг, комиссии за вычисления/пропускные батчи, субсидии ранним участникам и разработчикам.</p>
          </div>
          <div class="rounded-lg border border-white/10 p-4 bg-black/20">
            <h3 class="font-semibold text-white">Сроки</h3>
            <p class="mt-1 text-mist">Черновик — скоро. Открытая дискуссия — после публикации. Итеративное уточнение по результатам публичных тестов.</p>
          </div>
        </div>
      </div>

      <script is:inline>
        const steps = Array.from(document.querySelectorAll('.roadmap-step'));
        if (steps.length) {
          const io = new IntersectionObserver((entries)=>{
            entries.forEach((e)=>{
              if (e.isIntersecting) {
                e.target.classList.remove('opacity-0','translate-y-4');
                e.target.classList.add('opacity-100','translate-y-0');
                io.unobserve(e.target);
              }
            })
          }, { threshold: 0.15, rootMargin: '0px 0px -10% 0px' });
          steps.forEach((s, i)=>{
            s.style.transitionDelay = `${Math.min(i*80, 320)}ms`;
            io.observe(s);
          })
        }
      </script>
    </div>
  </section>
</BaseLayout>
