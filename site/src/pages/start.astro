---
import BaseLayout from '@layouts/BaseLayout.astro';
import StartPanel from '@components/StartPanel.tsx';
const baseRaw = import.meta.env.BASE_URL || '/';
const base = baseRaw.endsWith('/') ? baseRaw : baseRaw + '/';
const withBase = (path: string) => base + path.replace(/^\/+/, '');
---
<BaseLayout title="Getting Started — TRIAD">
  <section class="relative mx-auto max-w-6xl px-4 py-12 space-y-8">
    <div class="pointer-events-none absolute inset-0 opacity-30 [mask-image:radial-gradient(70%_60%_at_50%_30%,black,transparent)]">
      <div class="absolute -inset-24 bg-[radial-gradient(circle_at_top_right,rgba(124,156,255,0.18),transparent_60%)]"></div>
      <div class="absolute -inset-24 bg-[radial-gradient(circle_at_bottom_left,rgba(0,255,200,0.10),transparent_60%)]"></div>
    </div>

    <div class="relative">
      <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Getting Started</h1>
      <p class="mt-2 text-mist md:text-lg">Build and run the consensus demo locally. Then interact with the node directly from your browser.</p>

      <div class="mt-6 grid gap-6 md:grid-cols-2">
        <div class="rounded-xl border border-white/10 bg-white/5 p-5">
          <h2 class="text-white font-semibold">1) Build and run</h2>
          <pre class="mt-3 rounded-lg border border-white/10 p-4 text-sm overflow-auto"><code>cargo build --release
RAYON_NUM_THREADS=4 TRIAD_WAVE_SIG_BATCH=500 \
  cargo run --release --example quantum_consensus_demo</code></pre>
          <p class="mt-2 text-mist text-sm">Example source: <code>examples/quantum_consensus_demo.rs</code></p>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-5">
          <h2 class="text-white font-semibold">2) Connect to the API</h2>
          <p class="mt-2 text-mist text-sm">If your node exposes an HTTP API (e.g., <code>http://localhost:8080</code>), provide the address below to check network status, peers, and send a test transaction.</p>
        </div>
      </div>

      <div class="mt-6">
        <div class="mb-4 rounded-lg border border-amber-400/30 bg-amber-500/10 p-4 text-amber-200">
          <b class="text-amber-300">Work in progress:</b> browser-based network interaction will be available within 5–7 days.
          Stay tuned — we will add node ping, peer list, and test transaction submission right on this page.
        </div>
        <StartPanel client:load />
      </div>

      <div class="mt-8 flex flex-wrap gap-3">
        <a href={withBase('innovations')} class="inline-flex items-center gap-2 rounded-lg bg-white/10 px-4 py-2 text-white hover:bg-white/15 transition">Innovations →</a>
        <a href={withBase('structure')} class="inline-flex items-center gap-2 rounded-lg bg-white/10 px-4 py-2 text-white hover:bg-white/15 transition">Structure →</a>
      </div>
    </div>
  </section>
</BaseLayout>
